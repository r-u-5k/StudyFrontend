<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript">
    /*
    1. function객체를 변수에대입(일급함수)
    2. function객체를 파라메타데이타로사용
    3. function객체를 반환
    	- 자바스크립트 내부함수
    	- 클로져(closure)
    		클로져는 내부함수가 참조하는 외부함수의 지역변수가
    		외부함수에의해 내부함수가 반환된이후에도 환경(life-cycle)이
    		유지되는것을 의미한다.
    */
	
	function outer_function1() {
		let outer1_var = 'outer1 로컬변수 데이터';
		/****inner function****/
		function inner_function1() {
			let inner1_var = 'inner1 로컬변수 데이터';
			document.write('inner_function1 --> outer1_var: ' + outer1_var + '<br>');
			document.write('inner_function1 --> inner1_var: ' + inner1_var + '<br>');
		}
		document.write('-----outer_function1에서 inner_function1 호출 시작-----<br>')
		inner_function1();
		document.write('------outer_function1에서 inner_function1 호출 끝-------<br>')
		document.write('outer_function1 --> outer1_var: ' + outer1_var + '<br>');
		return inner_function1;
	}
    
	function outer_function2() {
		let outer2_var = 'outer2 로컬변수 데이터';
		/****inner function****/
		return function() {
			let inner2_var = 'inner2 로컬변수 데이터';
			document.write('익명 inner function --> outer2_var: ' + outer2_var + '<br>');
			document.write('익명 inner function --> inner2_var: ' + inner2_var + '<br>');
		}
	}

	function outer_function3() {
		let counter = 0;
		return function() {
			counter++;
			return counter;
		}
	}
    
   
</script>

</head>
<body>
	<h1>javascript inner function,closure(클로져)</h1>
	<hr/>
	<script type="text/javascript">
		document.write('###########outer_function1()호출 시작#############<br>');
		let returnInnerFunction1 = outer_function1();
		document.write('###########outer_function1()호출  끝##############<br>');
		document.write('########반환받은 inner_function1()호출 시작#########<br>');
		returnInnerFunction1();
		document.write('#########반환받은 inner_function1()호출   끝#########<br>');
		
		document.write('########반환받은 inner_function2()호출 시작#########<br>');
		let returnInnerFunction2 = outer_function2();
		returnInnerFunction2();
		
		outer_function2()(); // 같은 코드
		document.write('#########반환받은 inner_function2()호출   끝##########<br>');
		
		document.write('########반환받은 inner_function3()호출  시작########<br>');
		let returnInnerFunction3 = outer_function3();
		document.write('returnInnerFunction3: ' + returnInnerFunction3() + '<br>');
		document.write('returnInnerFunction3: ' + returnInnerFunction3() + '<br>');
		document.write('returnInnerFunction3: ' + returnInnerFunction3() + '<br>');
		document.write('#########반환받은 inner_function3()호출    끝#########<br>');
    </script>
</body>
</html>










